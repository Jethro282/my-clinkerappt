<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Guess the Clinker Colour</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  font-family: Arial, sans-serif;
  background: #fff7ec;
  text-align: center;
  padding: 30px;
}

.scoreboard {
  font-size: 18px;
  margin-bottom: 15px;
}

.stage {
  position: relative;
  width: 420px;
  height: 240px;
  margin: 0 auto 20px;
  overflow: hidden;
}

/* Clinker */
.clinker {
  position: absolute;
  right: 40px;
  bottom: 0;
  width: 180px;
  height: 180px;
  background: radial-gradient(circle at top left, #6b3e1e, #3b1c0c);
  border-radius: 50%;
  overflow: hidden;
}

.clinker.wiggle {
  animation: wiggle 0.6s ease-in-out;
}

@keyframes wiggle {
  0%   { transform: rotate(0deg); }
  20%  { transform: rotate(-5deg); }
  40%  { transform: rotate(5deg); }
  60%  { transform: rotate(-5deg); }
  80%  { transform: rotate(5deg); }
  100% { transform: rotate(0deg); }
}

.centre {
  position: absolute;
  width: 80px;
  height: 80px;
  border-radius: 50%;
  top: 50px;
  left: 50px;
  display: none;
}

.bite {
  position: absolute;
  width: 70px;
  height: 70px;
  background: #fff7ec;
  border-radius: 50%;
  top: 40px;
  right: -20px;
  display: none;
}

/* Pac-Man */
.pacman {
  position: absolute;
  left: -120px;
  bottom: 40px;
  width: 100px;
  height: 100px;
  background: #ffd400;
  border-radius: 50%;
  clip-path: polygon(0% 0%, 100% 50%, 0% 100%);
  display: none;
  z-index: 10;
  transform: rotate(180deg);
}

.pacman.open {
  clip-path: polygon(0% 0%, 100% 50%, 0% 100%);
}

.pacman.closed {
  clip-path: circle(50% at 50% 50%);
}

button {
  padding: 10px 18px;
  margin: 6px;
  font-size: 16px;
  cursor: pointer;
}

#result {
  font-size: 22px;
  margin-top: 15px;
  min-height: 30px;
}
</style>
</head>

<body>

<h1>Guess the Clinker Colour!</h1>

<div class="scoreboard">
  Score: <span id="score">0</span> |
  Streak: <span id="streak">0</span>
</div>

<div class="stage">
  <div class="pacman open" id="pacman"></div>

  <div class="clinker" id="clinker">
    <div class="centre" id="centre"></div>
    <div class="bite" id="bite"></div>
  </div>
</div>

<div>
  <button onclick="selectGuess('pink')">ðŸ©· Pink</button>
  <button onclick="selectGuess('yellow')">ðŸ’› Yellow</button>
  <button onclick="selectGuess('green')">ðŸ’š Green</button>
</div>

<button onclick="reveal()">Reveal</button>
<button onclick="resetGame()">Reset Clinker</button>

<div id="result"></div>

<audio id="crunchSound">
  <source src="https://cdn.pixabay.com/audio/2022/03/15/audio_42b8b36e6d.mp3" type="audio/mpeg">
</audio>

<script>
const colours = ["pink", "yellow", "green"];

const colourMap = {
  pink: "#ff5fa2",
  yellow: "#ffd84d",
  green: "#4cd964"
};

const emoji = {
  pink: "ðŸ©·",
  yellow: "ðŸ’›",
  green: "ðŸ’š"
};

let actual, guess = null;
let score = 0, streak = 0;

resetGame();

function selectGuess(c) {
  guess = c;
  document.getElementById("result").textContent =
    `${emoji[c]} ${c.charAt(0).toUpperCase() + c.slice(1)} selected`;
}

function reveal() {
  if (!guess) {
    alert("Pick a colour first!");
    return;
  }

  const clinker = document.getElementById("clinker");
  clinker.classList.add("wiggle");

  setTimeout(() => {
    clinker.classList.remove("wiggle");
    startPacman();
  }, 650);
}

function startPacman() {
  const pacman = document.getElementById("pacman");
  pacman.style.display = "block";

  let x = -120;
  let open = true;

  const move = setInterval(() => {
    x += 5;
    pacman.style.left = x + "px";
    pacman.className = "pacman " + (open ? "open" : "closed");
    open = !open;

    if (x >= 220) {
      clearInterval(move);
      bite();
    }
  }, 140);
}

function bite() {
  document.getElementById("crunchSound").play();
  document.getElementById("bite").style.display = "block";

  const centre = document.getElementById("centre");
  centre.style.background = colourMap[actual];
  centre.style.display = "block";

  const result = document.getElementById("result");

  if (guess === actual) {
    score++;
    streak++;
    result.textContent = "ðŸŽ‰ Correct! ðŸ¥³";
  } else {
    streak = 0;
    result.textContent = `âŒ Wrong! It was ${emoji[actual]} ${actual}`;
  }

  document.getElementById("score").textContent = score;
  document.getElementById("streak").textContent = streak;

  setTimeout(() => {
    document.getElementById("pacman").style.display = "none";
  }, 300);
}

function resetGame() {
  actual = colours[Math.floor(Math.random() * colours.length)];
  guess = null;

  document.getElementById("centre").style.display = "none";
  document.getElementById("bite").style.display = "none";
  document.getElementById("pacman").style.display = "none";
  document.getElementById("pacman").style.left = "-120px";
  document.getElementById("result").textContent = "";
}
</script>

</body>
</html>
